var w=(i,d,l)=>new Promise((p,u)=>{var f=o=>{try{t(l.next(o))}catch(a){u(a)}},m=o=>{try{t(l.throw(o))}catch(a){u(a)}},t=o=>o.done?p(o.value):Promise.resolve(o.value).then(f,m);t((l=l.apply(i,d)).next())});import{G as F}from"./b35ad29d.js";import{G as k}from"./4dceaa60.js";import{bH as _,f as x,v as h,q as A,h as Y,cl as S,e as s,bI as B,n as v,F as G,B as b}from"./51302e18.js";import{_ as E}from"./5a02183a.js";import{u as $,_ as M}from"./1063375f.js";import{G as D}from"./c360276e.js";import"./bcb17ec8.js";import"./588bd3a2.js";import"./8e804c7a.js";import"./02fed2d3.js";import"./a4ccdc4c.js";import"./e2c6ba59.js";import"./d211ac90.js";import"./6c0a9cda.js";import"./7293171d.js";import"./ecb9bcb5.js";import"./f1636982.js";import"./59ed408a.js";import"./6cea0f7a.js";import"./78e53698.js";import"./2bc2b75b.js";import"./2f1b953f.js";var C={exports:{}};(function(i,d){(function(l,p){i.exports=p()})(_,function(){return function(l,p,u){p.prototype.isBetween=function(f,m,t,o){var a=u(f),c=u(m),n=(o=o||"()")[0]==="(",e=o[1]===")";return(n?this.isAfter(a,t):!this.isBefore(a,t))&&(e?this.isBefore(c,t):!this.isAfter(c,t))||(n?this.isBefore(a,t):!this.isAfter(a,t))&&(e?this.isAfter(c,t):!this.isBefore(c,t))}}})})(C);const R=C.exports;B.extend(R);const g=()=>({time:B().add(1,"day").format("YYYY-MM-DD")}),se=x({name:"List",setup(){const i=h(),d=h(),l=h(),p=$(),u=A(g()),f=Y(()=>[{key:"time",type:"datePicker",props:{valueFormat:"YYYY-MM-DD",placeholder:"\u8BF7\u9009\u62E9\u65E5\u671F"}},{key:"1",type:"select",props:{placeholder:"\u8BF7\u9009\u62E9\u529E\u5BA2\u7AD9",showSearch:!0,options:m.value.map(e=>({label:e,value:e}))}},{key:"2",type:"input",props:{placeholder:"\u8BF7\u8F93\u5165\u8F66\u6B21"}},{key:"6",type:"select",props:{placeholder:"\u8BF7\u9009\u62E9\u7EBF\u8DEF",showSearch:!0,options:t.value.map(e=>({label:e,value:e}))}},{key:"status",type:"select",props:{placeholder:"\u8BF7\u9009\u62E9\u72B6\u6001",showSearch:!0,options:[{value:"1",label:"\u6B63\u5E38"},{value:"0",label:"\u505C\u8FD0"}]}}]),m=S("places",[]),t=S("ways",[]),o=S("columns",[]),a=S("dataSource",{list:[],total:0}),c=h(),n=h([]);return()=>s("div",{class:"container"},[s(k,{defaultFormData:g(),itemConfigs:f.value,onSearch:e=>{Object.assign(u,e);const y=a.value.list.filter(r=>e[1]?r[1]===e[1]:!0).filter(r=>e[6]?r[6]===e[6]:!0).filter(r=>e[2]?r[2].includes(e[2]):!0).filter(r=>e.status?e.status===r.status:!0);c.value={list:y,total:y.length},i.value.refresh()}},null),s(F,{rowKey:"0",rowSelection:{selectedRowKeys:n.value,onChange:e=>n.value=e},ref:i,columns:o.value.concat({key:"status",title:"\u72B6\u6001",customRender:({record:e})=>{let y=!0;return p.orderList.map(r=>{r.list.includes(e[0])&&B(u.time).isBetween(B(r.time[0]).add(-1,"day"),B(r.time[1]).add(1,"day"))&&(y=r.type==="1")}),y?s(D,{color:"green"},{default:()=>[v("\u6B63\u5E38")]}):s(D,{color:"red"},{default:()=>[v("\u505C\u8FD0")]})}}),listApi:()=>w(this,null,function*(){return{data:c.value||a.value}}),operationRender:()=>s(G,null,[s(b,{type:"primary",onClick:()=>d.value.showModal()},{default:()=>[v("\u5BFC\u5165")]}),s(b,{type:"primary"},{default:()=>[v("\u91CD\u770B\u5F53\u65E5\u7EDF\u8BA1")]}),s(b,{type:"primary",disabled:n.value.length===0,onClick:()=>l.value.init({list:n.value})},{default:()=>[v("\u6DFB\u52A0\u8C03\u4EE4")]})])},null),s(E,{ref:d,onSuccess:()=>i.value.refresh(),onUpdateColumns:e=>o.value=e,onUpdateDataSource:e=>a.value=e,onUpdatePlaces:e=>m.value=e,onUpdateWays:e=>t.value=e},null),s(M,{ref:l,onSuccess:()=>{i.value.refresh(),n.value=[]}},null)])}});export{se as default};
