var P=Object.defineProperty,T=Object.defineProperties;var U=Object.getOwnPropertyDescriptors;var H=Object.getOwnPropertySymbols;var q=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var F=(s,e,a)=>e in s?P(s,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[e]=a,u=(s,e)=>{for(var a in e||(e={}))q.call(e,a)&&F(s,a,e[a]);if(H)for(var a of H(e))R.call(e,a)&&F(s,a,e[a]);return s},S=(s,e)=>T(s,U(e));import{f as V,c as W,_ as z}from"./3c939097.js";import{_ as A,f as J,v as x,q as K,h as f,V as G,aH as Q,x as X,aD as Y,o as d,c as y,b as C,cx as m,l,F as Z,z as ee,D as ae,G as te,e as p,cC as se,ce as oe,w as L,n as O,B as N,t as le,bG as ne,bC as re}from"./f814164b.js";const ce=J({name:"GlobalSearch"}),ie=Object.assign(ce,{props:S(u({},V),{defaultHeight:{type:Number,default:50},defaultOpen:{type:Boolean,default:!1},defaultFormData:{type:Object},itemConfigs:{type:Object,default:()=>[]},labelCol:{type:Object,default:()=>({})}}),emits:["reset","search","update:formData"],setup(s,{expose:e,emit:a}){const t=s;let b={};const n=x(t.defaultOpen),B=x(),v=x(""),h=K(t.itemConfigs.reduce((o,r)=>(o[r.key]=void 0,o),{})),_=f(()=>t.formData||h),g=o=>{t.formData?a("update:formData",u(u({},t.formData),o)):Object.assign(h,o)},$=()=>{g(b),a("reset")},E=()=>{a("search",_.value)};G(()=>t.defaultFormData,()=>{b=t.defaultFormData||W(_.value),Object.assign(h,t.defaultFormData)});const I=f(()=>({height:`${n.value?v.value:t.defaultHeight}px`})),k=f(()=>v.value>t.defaultHeight),j=f(()=>t.itemConfigs.find(o=>o.label)),i=()=>{var o;v.value=(o=B.value)==null?void 0:o.offsetHeight};return G([()=>n.value,()=>t.itemConfigs],()=>{Q(()=>{i()})}),X(()=>{i(),window.addEventListener("resize",i)}),Y(()=>{window.removeEventListener("resize",i)}),e({reset:()=>g(b)}),(o,r)=>(d(),y("div",{class:m(["global-search",{active:l(k)}])},[C("div",{class:"parent-search",style:oe(l(I))},[C("div",{class:m({label:l(j),"search-box":!0}),ref_key:"$searchBox",ref:B},[(d(!0),y(Z,null,ee(s.itemConfigs,(c,M)=>(d(),ae(z,te({key:M},Object.keys(l(V)).reduce((D,w)=>Object.assign(D,{[w]:t[w]}),{}),{item:c,label:c==null?void 0:c.label,labelWrap:!0,formData:l(_),"onUpdate:formData":r[0]||(r[0]=D=>g(D))}),null,16,["item","label","formData"]))),128)),p(z,{item:{type:"custom",component:se("div",{class:"empty-box"},[])}},null,8,["item"])],2)],4),C("div",{class:m(["btn-box",{isOpen:n.value,label:l(j)}])},[p(l(N),{onClick:$},{default:L(()=>[O("\u91CD\u7F6E")]),_:1}),p(l(N),{type:"primary",onClick:E},{default:L(()=>[O("\u67E5\u8BE2")]),_:1}),l(k)?(d(),y("span",{key:0,class:"operation",onClick:r[1]||(r[1]=c=>n.value=!n.value)},[O(le(n.value?"\u6536\u8D77":"\u5C55\u5F00")+" ",1),p(l(ne),{class:m({active:n.value})},null,8,["class"])])):re("",!0)],2)],2))}}),me=A(ie,[["__scopeId","data-v-72c5fbdf"]]);export{me as G};
